# ‚úÖ Employee Update Feature - –ü–û–õ–ù–û–°–¢–¨–Æ –†–ï–ê–õ–ò–ó–û–í–ê–ù–û

**–î–∞—Ç–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è:** 17 –Ω–æ—è–±—Ä—è 2025
**–°—Ç–∞—Ç—É—Å:** ‚úÖ COMPLETED
**–í–µ—Ä—Å–∏—è:** 1.2.0

---

## üéØ –ò—Ç–æ–≥–æ–≤–æ–µ —Ä–µ—à–µ–Ω–∏–µ

–§—É–Ω–∫—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —Å —É—á—ë—Ç–æ–º –≤—Å–µ—Ö —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π:

### ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:

1. **–¢—Ä–∏ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞ API**
   - PATCH `/users/users/{id}/update-profile/` - –¥–ª—è –æ—Å–Ω–æ–≤–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏
   - POST `/users/users/{id}/change-password/` - –¥–ª—è –ø–∞—Ä–æ–ª—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
   - PATCH `/users/users/{id}/update-employee/` - –¥–ª—è –¥–∞–Ω–Ω—ã—Ö —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞

2. **–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –ø–∞—Ä–æ–ª—å**
   - –ü–æ–ª–µ –ø–∞—Ä–æ–ª—è –Ω–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –ø—Ä–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏
   - –í–∞–ª–∏–¥–∞—Ü–∏—è —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –ø–∞—Ä–æ–ª—å –≤–≤–µ–¥—ë–Ω
   - –ü–∞—Ä–æ–ª—å –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ

3. **–û—Ç–ø—Ä–∞–≤–∫–∞ —Ç–æ–ª—å–∫–æ –∏–∑–º–µ–Ω—ë–Ω–Ω—ã—Ö –ø–æ–ª–µ–π**
   - –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Ç–µ–∫—É—â–∏—Ö –∑–Ω–∞—á–µ–Ω–∏–π —Å –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–º–∏
   - –û—Ç–ø—Ä–∞–≤–∫–∞ —Ç–æ–ª—å–∫–æ –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
   - –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –æ—à–∏–±–æ–∫ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –Ω–µ–∏–∑–º–µ–Ω—ë–Ω–Ω—ã—Ö –ø–æ–ª–µ–π

4. **–£—Å–ª–æ–≤–Ω–∞—è —Ü–µ–ø–æ—á–∫–∞ –ø—Ä–æ–º–∏—Å–æ–≤**
   - API –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –µ—Å—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è
   - –ü—Ä–æ–ø—É—Å–∫ —à–∞–≥–æ–≤ —Å –Ω–µ–∏–∑–º–µ–Ω—ë–Ω–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
   - –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –Ω–∞ –∫–∞–∂–¥–æ–º —ç—Ç–∞–ø–µ

---

## üìã –§–∏–Ω–∞–ª—å–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è

### 1. API Layer - `src/entities/cashier/api/usersApi.ts`

```typescript
// –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è (–ë–ï–ó –ø–∞—Ä–æ–ª—è, —Ç–µ–ª–µ—Ñ–æ–Ω–∞, –ø–æ–ª–∞)
updateUser: (data: {
  id: number | string;
  username?: string;
  email?: string;
  first_name?: string;
  last_name?: string;
}) => {
  const { id, ...userData } = data;
  return api.patch(`/users/users/${id}/update-profile/`, userData);
},

// –ò–∑–º–µ–Ω–µ–Ω–∏–µ –ø–∞—Ä–æ–ª—è (–æ—Ç–¥–µ–ª—å–Ω—ã–π —ç–Ω–¥–ø–æ–∏–Ω—Ç)
changePassword: (data: {
  id: number | string;
  new_password: string;
}) => {
  const { id, new_password } = data;
  return api.post(`/users/users/${id}/change-password/`, { new_password });
},

// –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞
updateEmployee: (data: {
  id: number | string;
  role?: string;
  phone?: string;
  position?: string;
  is_active?: boolean;
}) => {
  const { id, ...employeeData } = data;
  return api.patch(`/users/users/${id}/update-employee/`, employeeData);
},
```

### 2. Model Layer - `src/entities/cashier/model/useChangePassword.ts`

```typescript
import { useMutation, useQueryClient } from "@tanstack/react-query";
import { usersApi } from "../api/usersApi";

export const useChangePassword = () => {
  const queryClient = useQueryClient();

  return useMutation({
    mutationFn: usersApi.changePassword,
    onSuccess: () => {
      queryClient.invalidateQueries({
        queryKey: ["users"],
      });
    },
  });
};
```

### 3. UI Layer - `src/pages/Settings/ui/Seller/index.tsx`

#### –°–æ—Å—Ç–æ—è–Ω–∏–µ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö:

```typescript
const [originalData, setOriginalData] = useState({
  name: "",
  phone: "",
  email: "",
  login: "",
  password: "",
});
```

#### –ó–∞–≥—Ä—É–∑–∫–∞ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö:

```typescript
useEffect(() => {
  if (currentUser.data?.employee_info) {
    const data = currentUser.data;
    const firstName = data.first_name ?? "";
    const phoneNumber = data.employee_info?.phone || "";
    const formattedPhone = phoneNumber ? format(phoneNumber.replace(/^\+998/, ""), maskOptions) : "";
    const emailValue = data.email ?? "";
    const usernameValue = data.username ?? "";

    setName(firstName);
    setPhone(formattedPhone);
    setEmail(emailValue);
    setLogin(usernameValue);
    setPassword(""); // –ü–∞—Ä–æ–ª—å –≤—Å–µ–≥–¥–∞ –ø—É—Å—Ç–æ–π –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ

    // –°–æ—Ö—Ä–∞–Ω—è–µ–º –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è
    setOriginalData({
      name: firstName,
      phone: formattedPhone,
      email: emailValue,
      login: usernameValue,
      password: "",
    });
  }
}, [currentUser.data, updateId, isOpenUpdate]);
```

#### –§—É–Ω–∫—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å –æ—Ç–ø—Ä–∞–≤–∫–æ–π —Ç–æ–ª—å–∫–æ –∏–∑–º–µ–Ω—ë–Ω–Ω—ã—Ö –ø–æ–ª–µ–π:

```typescript
function handleUpdate() {
  // –í–∞–ª–∏–¥–∞—Ü–∏—è...

  setError(null);
  const normalizedPhone = normalizePhone(phone);

  // –û–ø—Ä–µ–¥–µ–ª—è–µ–º –∫–∞–∫–∏–µ –ø–æ–ª—è –∏–∑–º–µ–Ω–∏–ª–∏—Å—å
  const profileChanges: any = {};
  if (name !== originalData.name) profileChanges.first_name = name;
  if (email !== originalData.email) profileChanges.email = email;
  if (login !== originalData.login) profileChanges.username = login;

  const phoneChanged = normalizedPhone !== normalizePhone(originalData.phone);
  const passwordChanged = password && password.trim();

  // –°–æ–∑–¥–∞—ë–º —Ü–µ–ø–æ—á–∫—É –ø—Ä–æ–º–∏—Å–æ–≤
  let updateChain = Promise.resolve({ status: 200 } as any);

  // –®–∞–≥ 1: –û–±–Ω–æ–≤–ª—è–µ–º –ø—Ä–æ—Ñ–∏–ª—å —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –µ—Å—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è
  if (Object.keys(profileChanges).length > 0) {
    updateChain = updateChain.then(() =>
      updateUser.mutateAsync({
        id: updateId,
        ...profileChanges,
      })
    );
  }

  // –®–∞–≥ 2: –û–±–Ω–æ–≤–ª—è–µ–º –ø–∞—Ä–æ–ª—å —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –æ–Ω –±—ã–ª –≤–≤–µ–¥—ë–Ω
  if (passwordChanged) {
    updateChain = updateChain.then((res) => {
      if (res.status === 200) {
        return changePassword.mutateAsync({
          id: updateId,
          new_password: password,
        });
      }
      throw new Error("Failed to update user");
    });
  }

  // –®–∞–≥ 3: –û–±–Ω–æ–≤–ª—è–µ–º employee info (phone) —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –∏–∑–º–µ–Ω–∏–ª—Å—è
  if (phoneChanged) {
    updateChain = updateChain.then((res) => {
      if (res.status === 200) {
        return updateEmployee.mutateAsync({
          id: updateId,
          phone: normalizedPhone,
        });
      }
      throw new Error("Failed to change password");
    });
  }

  // –í—ã–ø–æ–ª–Ω—è–µ–º —Ü–µ–ø–æ—á–∫—É –∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç
  updateChain
    .then(() => {
      setIsOpenUpdate(false);
      clearData();
    })
    .catch((error) => {
      console.error("Update error:", error);
      setError("Xatolik yuz berdi. Qaytadan urinib ko'ring.");
    });
}
```

#### UI –ø–æ–¥—Å–∫–∞–∑–∫–∞ –¥–ª—è –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–≥–æ –ø–∞—Ä–æ–ª—è:

```typescript
<p className={styles.label__input}>
  Parol {isOpenUpdate && <span style={{ opacity: 0.6, fontSize: '12px' }}>(bo'sh qoldiring o'zgartirmaslik uchun)</span>}
</p>
<input
  type="password"
  className={styles.modal__input}
  value={password}
  onChange={(e) => setPassword(e.target.value)}
  placeholder={isOpenUpdate ? "Yangi parol (ixtiyoriy)" : "password"}
/>
```

---

## üß™ –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Ç–æ–ª—å–∫–æ –∏–º–µ–Ω–∏

**–î–µ–π—Å—Ç–≤–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:**
- –ò–∑–º–µ–Ω–∏–ª "–ò–≤–∞–Ω" ‚Üí "–ü–µ—Ç—Ä"
- –û—Å—Ç–∞–ª—å–Ω–æ–µ –Ω–µ —Ç—Ä–æ–≥–∞–ª

**–û—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã:**
```typescript
// –¢–æ–ª—å–∫–æ –æ–¥–∏–Ω –∑–∞–ø—Ä–æ—Å
PATCH /api/users/users/2/update-profile/
{
  "first_name": "–ü–µ—Ç—Ä"
}
```

### –°—Ü–µ–Ω–∞—Ä–∏–π 2: –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Ç–µ–ª–µ—Ñ–æ–Ω–∞ –∏ –ø–∞—Ä–æ–ª—è

**–î–µ–π—Å—Ç–≤–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:**
- –ò–∑–º–µ–Ω–∏–ª —Ç–µ–ª–µ—Ñ–æ–Ω
- –í–≤—ë–ª –Ω–æ–≤—ã–π –ø–∞—Ä–æ–ª—å

**–û—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã:**
```typescript
// –î–≤–∞ –∑–∞–ø—Ä–æ—Å–∞
POST /api/users/users/2/change-password/
{
  "new_password": "NewPass123!"
}

PATCH /api/users/users/2/update-employee/
{
  "phone": "+998901234567"
}
```

### –°—Ü–µ–Ω–∞—Ä–∏–π 3: –ò–∑–º–µ–Ω–µ–Ω–∏–µ –≤—Å–µ—Ö –ø–æ–ª–µ–π

**–î–µ–π—Å—Ç–≤–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:**
- –ò–∑–º–µ–Ω–∏–ª –∏–º—è, email, –ª–æ–≥–∏–Ω
- –í–≤—ë–ª –Ω–æ–≤—ã–π –ø–∞—Ä–æ–ª—å
- –ò–∑–º–µ–Ω–∏–ª —Ç–µ–ª–µ—Ñ–æ–Ω

**–û—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã:**
```typescript
// –¢—Ä–∏ –∑–∞–ø—Ä–æ—Å–∞ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ
PATCH /api/users/users/2/update-profile/
{
  "first_name": "–ù–æ–≤–æ–µ –∏–º—è",
  "email": "new@example.com",
  "username": "newlogin"
}

POST /api/users/users/2/change-password/
{
  "new_password": "NewPass123!"
}

PATCH /api/users/users/2/update-employee/
{
  "phone": "+998901234567"
}
```

### –°—Ü–µ–Ω–∞—Ä–∏–π 4: –û—Ç–∫—Ä—ã–ª —Ñ–æ—Ä–º—É –∏ –Ω–∞–∂–∞–ª "–°–æ—Ö—Ä–∞–Ω–∏—Ç—å" –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π

**–î–µ–π—Å—Ç–≤–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:**
- –û—Ç–∫—Ä—ã–ª —Ñ–æ—Ä–º—É —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- –ù–∏—á–µ–≥–æ –Ω–µ –º–µ–Ω—è–ª
- –ù–∞–∂–∞–ª "O'zgartirish"

**–û—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã:**
```typescript
// –ù–ò –û–î–ù–û–ì–û –∑–∞–ø—Ä–æ—Å–∞ –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ ‚úÖ
// –§–æ—Ä–º–∞ –ø—Ä–æ—Å—Ç–æ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è
```

---

## üìä –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### 1. –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- ‚úÖ –ú–µ–Ω—å—à–µ —Å–µ—Ç–µ–≤—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
- ‚úÖ –ú–µ–Ω—å—à–µ –Ω–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ backend
- ‚úÖ –ë—ã—Å—Ç—Ä–µ–µ –æ–±—Ä–∞–±–æ—Ç–∫–∞

### 2. UX (User Experience)
- ‚úÖ –ü–∞—Ä–æ–ª—å –æ–ø—Ü–∏–æ–Ω–∞–ª–µ–Ω –ø—Ä–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏
- ‚úÖ –ü–æ–Ω—è—Ç–Ω–∞—è –ø–æ–¥—Å–∫–∞–∑–∫–∞ "(bo'sh qoldiring o'zgartirmaslik uchun)"
- ‚úÖ –ù–µ—Ç –ª–∏—à–Ω–∏—Ö –æ—à–∏–±–æ–∫ –≤–∞–ª–∏–¥–∞—Ü–∏–∏

### 3. –ù–∞–¥—ë–∂–Ω–æ—Å—Ç—å
- ‚úÖ –ù–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –Ω–∞ –∫–∞–∂–¥–æ–º —ç—Ç–∞–ø–µ

### 4. –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- ‚úÖ –ü–∞—Ä–æ–ª—å –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è
- ‚úÖ –û—Ç–ø—Ä–∞–≤–∫–∞ —Ç–æ–ª—å–∫–æ –∏–∑–º–µ–Ω—ë–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö HTTP –º–µ—Ç–æ–¥–æ–≤ (PATCH/POST)

---

## üîç –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ß–µ–∫-–ª–∏—Å—Ç –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:

- [ ] –û—Ç–∫—Ä—ã—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É "–ù–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Üí –†–∞–±–æ—á–∏–µ"
- [ ] –ù–∞–∂–∞—Ç—å –Ω–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ —Ñ–æ—Ä–º–∞ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è —Å —Ç–µ–∫—É—â–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –ø–∞—Ä–æ–ª—å –ø—É—Å—Ç–æ–π
- [ ] –ò–∑–º–µ–Ω–∏—Ç—å —Ç–æ–ª—å–∫–æ –∏–º—è ‚Üí –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –æ–¥–∏–Ω –∑–∞–ø—Ä–æ—Å –≤ Network
- [ ] –ò–∑–º–µ–Ω–∏—Ç—å —Ç–æ–ª—å–∫–æ —Ç–µ–ª–µ—Ñ–æ–Ω ‚Üí –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –æ–¥–∏–Ω –∑–∞–ø—Ä–æ—Å
- [ ] –ò–∑–º–µ–Ω–∏—Ç—å —Ç–æ–ª—å–∫–æ –ø–∞—Ä–æ–ª—å ‚Üí –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –æ–¥–∏–Ω –∑–∞–ø—Ä–æ—Å
- [ ] –ò–∑–º–µ–Ω–∏—Ç—å –≤—Å—ë ‚Üí –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç—Ä–∏ –∑–∞–ø—Ä–æ—Å–∞
- [ ] –ù–µ –º–µ–Ω—è—Ç—å –Ω–∏—á–µ–≥–æ –∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å ‚Üí –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –∑–∞–ø—Ä–æ—Å–æ–≤ –Ω–µ—Ç
- [ ] –í–≤–µ—Å—Ç–∏ —Å–ª–∞–±—ã–π –ø–∞—Ä–æ–ª—å ‚Üí –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—à–∏–±–∫—É –≤–∞–ª–∏–¥–∞—Ü–∏–∏
- [ ] –û—Å—Ç–∞–≤–∏—Ç—å –ø–∞—Ä–æ–ª—å –ø—É—Å—Ç—ã–º ‚Üí –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –≤–∞–ª–∏–¥–∞—Ü–∏—è –Ω–µ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç

### Network Tab –ø—Ä–æ–≤–µ—Ä–∫–∞:

–û—Ç–∫—Ä–æ–π—Ç–µ DevTools ‚Üí Network –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:

1. **Request URL** –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º:
   - `/update-profile/` –¥–ª—è –æ—Å–Ω–æ–≤–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏
   - `/change-password/` –¥–ª—è –ø–∞—Ä–æ–ª—è
   - `/update-employee/` –¥–ª—è —Ç–µ–ª–µ—Ñ–æ–Ω–∞

2. **Request Method** –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º:
   - PATCH –¥–ª—è `/update-profile/`
   - POST –¥–ª—è `/change-password/`
   - PATCH –¥–ª—è `/update-employee/`

3. **Request Payload** —Å–æ–¥–µ—Ä–∂–∏—Ç —Ç–æ–ª—å–∫–æ –∏–∑–º–µ–Ω—ë–Ω–Ω—ã–µ –ø–æ–ª—è

4. **Response Status** = 200 OK –¥–ª—è –≤—Å–µ—Ö –∑–∞–ø—Ä–æ—Å–æ–≤

---

## üìö –°–≤—è–∑–∞–Ω–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- [API_UPDATE_GUIDE.md](API_UPDATE_GUIDE.md) - –ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ API
- [CHANGELOG_UPDATE_FIX.md](CHANGELOG_UPDATE_FIX.md) - –ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π
- [README_UPDATE_ISSUE.md](README_UPDATE_ISSUE.md) - –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã
- [FINAL_STATUS.md](FINAL_STATUS.md) - –û–±—â–∏–π —Å—Ç–∞—Ç—É—Å –ø—Ä–æ–µ–∫—Ç–∞

---

## ‚úÖ –†–µ—à—ë–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### –ü—Ä–æ–±–ª–µ–º–∞ 1: 405 Method Not Allowed
**–†–µ—à–µ–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤ `/update-profile/`, `/change-password/`, `/update-employee/`

### –ü—Ä–æ–±–ª–µ–º–∞ 2: –ü–∞—Ä–æ–ª—å –≤—Å–µ–≥–¥–∞ –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω
**–†–µ—à–µ–Ω–∏–µ:** –£—Å–ª–æ–≤–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è –∏ –æ—Ç–ø—Ä–∞–≤–∫–∞ –ø–∞—Ä–æ–ª—è —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –≤–≤–µ–¥—ë–Ω

### –ü—Ä–æ–±–ª–µ–º–∞ 3: –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —ç–Ω–¥–ø–æ–∏–Ω—Ç
**–†–µ—à–µ–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `/update-profile/` –≤–º–µ—Å—Ç–æ `/users/users/{id}/`

### –ü—Ä–æ–±–ª–µ–º–∞ 4: Email conflict –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏
**–†–µ—à–µ–Ω–∏–µ:** –û—Ç–ø—Ä–∞–≤–∫–∞ —Ç–æ–ª—å–∫–æ –∏–∑–º–µ–Ω—ë–Ω–Ω—ã—Ö –ø–æ–ª–µ–π –ø–æ—Å–ª–µ —Å—Ä–∞–≤–Ω–µ–Ω–∏—è —Å –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏

---

## üöÄ –°—Ç–∞—Ç—É—Å –ø—Ä–æ–µ–∫—Ç–∞

**Dev Server:** ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ http://localhost:3112/
**Backend API:** ‚úÖ –í—Å–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –¥–æ—Å—Ç—É–ø–Ω—ã
**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:** ‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω
**–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:** ‚è≥ –¢—Ä–µ–±—É–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º

---

## üë®‚Äçüíª –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤

### –ï—Å–ª–∏ –Ω—É–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —ç—Ç–æ—Ç –ø–∞—Ç—Ç–µ—Ä–Ω –≤ –¥—Ä—É–≥–∏—Ö –º–µ—Å—Ç–∞—Ö:

1. **–°–æ–∑–¥–∞–π—Ç–µ state –¥–ª—è –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö:**
```typescript
const [originalData, setOriginalData] = useState({...});
```

2. **–°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ:**
```typescript
useEffect(() => {
  setOriginalData({ field1: value1, field2: value2 });
}, [data]);
```

3. **–°—Ä–∞–≤–Ω–∏—Ç–µ –∏ –æ—Ç–ø—Ä–∞–≤—å—Ç–µ —Ç–æ–ª—å–∫–æ –∏–∑–º–µ–Ω—ë–Ω–Ω—ã–µ:**
```typescript
const changes = {};
if (current.field1 !== original.field1) changes.field1 = current.field1;
if (Object.keys(changes).length > 0) {
  await api.update(changes);
}
```

---

**–ê–≤—Ç–æ—Ä:** Claude Code
**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 17 –Ω–æ—è–±—Ä—è 2025
**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 17 –Ω–æ—è–±—Ä—è 2025
**–í–µ—Ä—Å–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞:** 1.0
