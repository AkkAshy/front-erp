# –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é ERP —Å–∏—Å—Ç–µ–º—ã

## üöÄ –ó–∞–ø—É—Å–∫ —Å–∏—Å—Ç–µ–º—ã

### 1. –ó–∞–ø—É—Å–∫ Backend

```bash
cd /Users/akkanat/Projects/erp_v2/new_backend
source venv/bin/activate
python manage.py runserver
```

Backend –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞: `http://localhost:8000`

### 2. –ó–∞–ø—É—Å–∫ Frontend

```bash
cd /Users/akkanat/Projects/erp_v2/new_frontend
npm run dev
```

Frontend –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞: `http://localhost:3110` (–∏–ª–∏ –¥—Ä—É–≥–æ–º –ø–æ—Ä—Ç—É, —É–∫–∞–∑–∞–Ω–Ω–æ–º –≤ –∫–æ–Ω—Å–æ–ª–∏)

---

## üìã –°—Ü–µ–Ω–∞—Ä–∏–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### –¢–µ—Å—Ç 1: –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ –º–∞–≥–∞–∑–∏–Ω–∞ ‚úÖ

**–¶–µ–ª—å:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –º–∞–≥–∞–∑–∏–Ω–∞ —Å –≤–ª–∞–¥–µ–ª—å—Ü–µ–º

**–®–∞–≥–∏:**
1. –û—Ç–∫—Ä—ã—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
2. –ó–∞–ø–æ–ª–Ω–∏—Ç—å —Ñ–æ—Ä–º—É:
   - **–õ–∏—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:**
     - –ò–º—è: –ò–≤–∞–Ω
     - –§–∞–º–∏–ª–∏—è: –ü–µ—Ç—Ä–æ–≤
     - –û—Ç—á–µ—Å—Ç–≤–æ: –°–µ—Ä–≥–µ–µ–≤–∏—á
     - –¢–µ–ª–µ—Ñ–æ–Ω: +998 90 123 45 67
   - **–î–∞–Ω–Ω—ã–µ –¥–ª—è –≤—Ö–æ–¥–∞:**
     - –õ–æ–≥–∏–Ω: ivan_shop
     - –ü–∞—Ä–æ–ª—å: SecurePass123!
     - –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø–∞—Ä–æ–ª—è: SecurePass123!
   - **–î–∞–Ω–Ω—ã–µ –º–∞–≥–∞–∑–∏–Ω–∞:**
     - –ù–∞–∑–≤–∞–Ω–∏–µ: –°—É–ø–µ—Ä–º–∞—Ä–∫–µ—Ç "–ê–∑–∏—è"
     - –ê–¥—Ä–µ—Å: —É–ª. –ù–∞–≤–æ–∏, –¥. 45
     - –ì–æ—Ä–æ–¥: –¢–∞—à–∫–µ–Ω—Ç
     - –†–µ–≥–∏–æ–Ω: –Æ–Ω—É—Å–∞–±–∞–¥—Å–∫–∏–π —Ä–∞–π–æ–Ω
     - –¢–µ–ª–µ—Ñ–æ–Ω: +998 71 234 56 78
3. –ù–∞–∂–∞—Ç—å "Ro'yxatdan o'tish"

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ –†–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ –≥–ª–∞–≤–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É (Dashboard)
- ‚úÖ `tenant_key` —Å–æ—Ö—Ä–∞–Ω–µ–Ω –≤ localStorage
- ‚úÖ `access_token` –∏ `refresh_token` —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã
- ‚úÖ –í –∫–æ–Ω—Å–æ–ª–∏ –Ω–µ—Ç –æ—à–∏–±–æ–∫

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
```javascript
// –û—Ç–∫—Ä—ã—Ç—å DevTools Console –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç—å:
localStorage.getItem('tenant_key')  // –î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å –∫–ª—é—á —Ç–∏–ø–∞ "asia_market_a3f4b2c1"
localStorage.getItem('access_token')  // –î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å JWT —Ç–æ–∫–µ–Ω
```

---

### –¢–µ—Å—Ç 2: –í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É ‚úÖ

**–¶–µ–ª—å:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é

**–®–∞–≥–∏:**
1. –û—Ç–∫—Ä—ã—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É –ª–æ–≥–∏–Ω–∞
2. –í–≤–µ—Å—Ç–∏ –¥–∞–Ω–Ω—ã–µ:
   - –õ–æ–≥–∏–Ω: ivan_shop (–∏–ª–∏ admin –¥–ª—è —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è)
   - –ü–∞—Ä–æ–ª—å: SecurePass123! (–∏–ª–∏ admin123)
3. –ù–∞–∂–∞—Ç—å "Kirish"

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ –†–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ Dashboard
- ‚úÖ `tenant_key` –∑–∞–≥—Ä—É–∂–µ–Ω –∏–∑ –æ—Ç–≤–µ—Ç–∞
- ‚úÖ –ó–∞–≥–æ–ª–æ–≤–æ–∫ `X-Tenant-Key` –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –∫ –∑–∞–ø—Ä–æ—Å–∞–º

**–ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–ø—Ä–æ—Å–æ–≤:**
1. –û—Ç–∫—Ä—ã—Ç—å DevTools ‚Üí Network
2. –ü–µ—Ä–µ–π—Ç–∏ –Ω–∞ –ª—é–±—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É (–Ω–∞–ø—Ä–∏–º–µ—Ä, –¢–æ–≤–∞—Ä—ã)
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∑–∞–ø—Ä–æ—Å –∫ `/api/products/products/`
4. –í–æ –≤–∫–ª–∞–¥–∫–µ Headers –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å:
   ```
   X-Tenant-Key: asia_market_a3f4b2c1
   Authorization: Bearer <token>
   ```

---

### –¢–µ—Å—Ç 3: –°–æ–∑–¥–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞ ‚è≥

**–¶–µ–ª—å:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ–∑–¥–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞ —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–µ–π SKU/barcode

**–ü—Ä–µ–¥—É—Å–ª–æ–≤–∏—è:**
- –°–æ–∑–¥–∞–Ω—ã –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ (–∏–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é)
- –°–æ–∑–¥–∞–Ω—ã –µ–¥–∏–Ω–∏—Ü—ã –∏–∑–º–µ—Ä–µ–Ω–∏—è (–∏–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é)

**–®–∞–≥–∏:**
1. –ü–µ—Ä–µ–π—Ç–∏ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É "Tovarlar" (–¢–æ–≤–∞—Ä—ã)
2. –ù–∞–∂–∞—Ç—å "+ Yangi tovar" (–°–æ–∑–¥–∞—Ç—å —Ç–æ–≤–∞—Ä)
3. –ó–∞–ø–æ–ª–Ω–∏—Ç—å —Ñ–æ—Ä–º—É:
   - **–û—Å–Ω–æ–≤–Ω–æ–µ:**
     - –ù–∞–∑–≤–∞–Ω–∏–µ: –ú–æ–ª–æ–∫–æ 3.2%
     - –û–ø–∏—Å–∞–Ω–∏–µ: –°–≤–µ–∂–µ–µ –º–æ–ª–æ–∫–æ
     - –ö–∞—Ç–µ–≥–æ—Ä–∏—è: –ú–æ–ª–æ—á–Ω—ã–µ –ø—Ä–æ–¥—É–∫—Ç—ã
     - –ï–¥–∏–Ω–∏—Ü–∞: —à—Ç
   - **–¶–µ–Ω—ã:**
     - –°–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç—å: 8 000 uzs
     - –¶–µ–Ω–∞ –ø—Ä–æ–¥–∞–∂–∏: 12 000 uzs
     - –û–ø—Ç–æ–≤–∞—è —Ü–µ–Ω–∞: 10 000 uzs (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
   - **–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ:**
     - –ù–∞—á–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ: 100
     - –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –æ—Å—Ç–∞—Ç–æ–∫: 10
   - **–°—Ä–æ–∫ –≥–æ–¥–Ω–æ—Å—Ç–∏:**
     - –î–∞—Ç–∞: 2025-02-15
4. –ù–∞–∂–∞—Ç—å "Yaratish"

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ –¢–æ–≤–∞—Ä —Å–æ–∑–¥–∞–Ω —É—Å–ø–µ—à–Ω–æ
- ‚úÖ –¢–æ–≤–∞—Ä –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤ —Å–ø–∏—Å–∫–µ
- ‚úÖ SKU —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä: "SKU-001")
- ‚úÖ Barcode —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ (13 —Ü–∏—Ñ—Ä)
- ‚úÖ –ü–µ—Ä–≤–∞—è –ø–∞—Ä—Ç–∏—è —Å–æ–∑–¥–∞–Ω–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- ‚úÖ –®—Ç—Ä–∏—Ö–∫–æ–¥ –ø–∞—Ä—Ç–∏–∏ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω

**–ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ Network:**
```json
// POST /api/products/products/
Request:
{
  "name": "–ú–æ–ª–æ–∫–æ 3.2%",
  "description": "–°–≤–µ–∂–µ–µ –º–æ–ª–æ–∫–æ",
  "category": 1,
  "unit": 1,
  "cost_price": 8000,
  "sale_price": 12000,
  "wholesale_price": 10000,
  "initial_quantity": 100,
  "min_quantity": 10,
  "expiry_date": "2025-02-15",
  "track_inventory": true
  // –ù–ï–¢ sku –∏ barcode!
}

Response (201 Created):
{
  "id": 5,
  "name": "–ú–æ–ª–æ–∫–æ 3.2%",
  "sku": "SKU-001",  // ‚Üê –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
  "barcode": "1234567890123",  // ‚Üê –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
  "category": 1,
  "unit": 1,
  "pricing": {
    "cost_price": "8000.00",
    "sale_price": "12000.00",
    "wholesale_price": "10000.00"
  },
  "inventory": {
    "quantity": "100.00",
    "min_quantity": "10.00",
    "track_inventory": true
  },
  "batches": [
    {
      "id": 1,
      "batch_number": "BATCH-001",  // ‚Üê –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
      "barcode": "9876543210123",  // ‚Üê –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
      "quantity": "100.00",
      "purchase_price": "8000.00"
    }
  ]
}
```

---

### –¢–µ—Å—Ç 4: –û—Ç–∫—Ä—ã—Ç–∏–µ –∫–∞—Å—Å–æ–≤–æ–π —Å–º–µ–Ω—ã ‚è≥

**–¶–µ–ª—å:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—Ç–∫—Ä—ã—Ç–∏–µ —Å–º–µ–Ω—ã –∫–∞—Å—Å–∏—Ä–∞

**–®–∞–≥–∏:**
1. –ü–µ—Ä–µ–π—Ç–∏ –Ω–∞ –≥–ª–∞–≤–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É (POS)
2. –ï—Å–ª–∏ —Å–º–µ–Ω–∞ –Ω–µ –æ—Ç–∫—Ä—ã—Ç–∞, –ø–æ—è–≤–∏—Ç—Å—è –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
3. –í–≤–µ—Å—Ç–∏ –Ω–∞—á–∞–ª—å–Ω—É—é —Å—É–º–º—É –≤ –∫–∞—Å—Å–µ: 100 000 uzs
4. –ù–∞–∂–∞—Ç—å "Smenani ochish"

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ –°–º–µ–Ω–∞ –æ—Ç–∫—Ä—ã—Ç–∞
- ‚úÖ ID —Å–º–µ–Ω—ã —Å–æ—Ö—Ä–∞–Ω–µ–Ω
- ‚úÖ –ú–æ–∂–Ω–æ —Å–æ–∑–¥–∞–≤–∞—Ç—å –ø—Ä–æ–¥–∞–∂–∏

**–ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ Network:**
```json
// POST /api/sales/sessions/open/
Request:
{
  "opening_cash": 100000
}

Response (201):
{
  "id": 1,
  "cash_register": 1,
  "status": "open",
  "opening_cash": "100000.00",
  "opened_at": "2025-01-17T10:00:00Z",
  "cashier": 1,
  "cashier_name": "–ò–≤–∞–Ω –ü–µ—Ç—Ä–æ–≤"
}
```

---

### –¢–µ—Å—Ç 5: –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–¥–∞–∂–∏ ‚è≥

**–¶–µ–ª—å:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–¥–∞–∂–∏ —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–µ–π —á–µ–∫–∞

**–ü—Ä–µ–¥—É—Å–ª–æ–≤–∏—è:**
- –û—Ç–∫—Ä—ã—Ç–∞ –∫–∞—Å—Å–æ–≤–∞—è —Å–º–µ–Ω–∞
- –ï—Å—Ç—å —Ç–æ–≤–∞—Ä—ã –≤ –±–∞–∑–µ

**–®–∞–≥–∏:**
1. –ù–∞—Ö–æ–¥—è—Å—å –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ POS
2. –î–æ–±–∞–≤–∏—Ç—å —Ç–æ–≤–∞—Ä –≤ –∫–æ—Ä–∑–∏–Ω—É (–ú–æ–ª–æ–∫–æ 3.2% - 2 —à—Ç)
3. –í–≤–µ—Å—Ç–∏ –¥–∞–Ω–Ω—ã–µ –∫–ª–∏–µ–Ω—Ç–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):
   - –ò–º—è: –ê–ª–∏—à–µ—Ä
   - –¢–µ–ª–µ—Ñ–æ–Ω: +998 90 999 88 77
4. –í—ã–±—Ä–∞—Ç—å —Å–ø–æ—Å–æ–± –æ–ø–ª–∞—Ç—ã: –ù–∞–ª–∏—á–Ω—ã–µ
5. –í–≤–µ—Å—Ç–∏ –ø–æ–ª—É—á–µ–Ω–Ω—É—é —Å—É–º–º—É: 50 000 uzs
6. –ù–∞–∂–∞—Ç—å "Sotish"

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ –ü—Ä–æ–¥–∞–∂–∞ —Å–æ–∑–¥–∞–Ω–∞
- ‚úÖ –ù–æ–º–µ—Ä —á–µ–∫–∞ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- ‚úÖ –û—Å—Ç–∞—Ç–æ–∫ —Ç–æ–≤–∞—Ä–∞ —É–º–µ–Ω—å—à–∏–ª—Å—è (100 ‚Üí 98)
- ‚úÖ –°–¥–∞—á–∞ —Ä–∞—Å—Å—á–∏—Ç–∞–Ω–∞: 50 000 - 24 000 = 26 000 uzs
- ‚úÖ –ß–µ–∫ –º–æ–∂–Ω–æ —Ä–∞—Å–ø–µ—á–∞—Ç–∞—Ç—å

**–ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ Network:**
```json
// POST /api/sales/sales/
Request:
{
  "session": 1,
  "customer_name": "–ê–ª–∏—à–µ—Ä",
  "customer_phone": "+998909998877",
  "items": [
    {
      "product": 5,
      "quantity": 2,
      "unit_price": 12000
    }
  ],
  "payments": [
    {
      "payment_method": "cash",
      "amount": 24000,
      "received_amount": 50000
    }
  ]
}

Response (201):
{
  "id": 1,
  "receipt_number": "CHECK-0001",  // ‚Üê –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
  "status": "completed",
  "customer_name": "–ê–ª–∏—à–µ—Ä",
  "subtotal": "24000.00",
  "discount_amount": "0.00",
  "tax_amount": "0.00",
  "total_amount": "24000.00",
  "items": [...],
  "payments": [
    {
      "payment_method": "cash",
      "amount": "24000.00",
      "received_amount": "50000.00",
      "change_amount": "26000.00"  // ‚Üê –°–¥–∞—á–∞ —Ä–∞—Å—Å—á–∏—Ç–∞–Ω–∞
    }
  ]
}
```

---

### –¢–µ—Å—Ç 6: –ó–∞–∫—Ä—ã—Ç–∏–µ —Å–º–µ–Ω—ã ‚è≥

**–¶–µ–ª—å:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∑–∞–∫—Ä—ã—Ç–∏–µ —Å–º–µ–Ω—ã —Å –æ—Ç—á–µ—Ç–æ–º

**–®–∞–≥–∏:**
1. –ü–µ—Ä–µ–π—Ç–∏ –≤ —Ä–∞–∑–¥–µ–ª —Å–º–µ–Ω
2. –ù–∞–π—Ç–∏ —Ç–µ–∫—É—â—É—é –æ—Ç–∫—Ä—ã—Ç—É—é —Å–º–µ–Ω—É
3. –ù–∞–∂–∞—Ç—å "Smenani yopish"
4. –í–≤–µ—Å—Ç–∏:
   - –§–∞–∫—Ç–∏—á–µ—Å–∫–∞—è —Å—É–º–º–∞ –≤ –∫–∞—Å—Å–µ: 124 000 uzs
   - –ü—Ä–∏–º–µ—á–∞–Ω–∏—è: "–í—Å–µ –≤ –ø–æ—Ä—è–¥–∫–µ"
5. –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ –°–º–µ–Ω–∞ –∑–∞–∫—Ä—ã—Ç–∞
- ‚úÖ –û—Ç—á–µ—Ç —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω:
  - –ù–∞—á–∞–ª—å–Ω–∞—è —Å—É–º–º–∞: 100 000
  - –ü—Ä–æ–¥–∞–∂–∏: 24 000
  - –û–∂–∏–¥–∞–µ–º–∞—è —Å—É–º–º–∞: 124 000
  - –§–∞–∫—Ç–∏—á–µ—Å–∫–∞—è: 124 000
  - –†–∞–∑–Ω–∏—Ü–∞: 0

**–ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ Network:**
```json
// POST /api/sales/sessions/1/close/
Request:
{
  "closing_cash": 124000,
  "notes": "–í—Å–µ –≤ –ø–æ—Ä—è–¥–∫–µ"
}

Response (200):
{
  "id": 1,
  "status": "closed",
  "opening_cash": "100000.00",
  "expected_cash": "124000.00",
  "closing_cash": "124000.00",
  "difference": "0.00",
  "total_sales": "24000.00",
  "sales_count": 1,
  "closed_at": "2025-01-17T18:00:00Z"
}
```

---

### –¢–µ—Å—Ç 7: –°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —à—Ç—Ä–∏—Ö–∫–æ–¥–∞ ‚è≥

**–¶–µ–ª—å:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–∏—Å–∫ —Ç–æ–≤–∞—Ä–∞ –ø–æ —à—Ç—Ä–∏—Ö–∫–æ–¥—É

**–®–∞–≥–∏:**
1. –ù–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ POS
2. –ù–∞–∂–∞—Ç—å –≤ –ø–æ–ª–µ –ø–æ–∏—Å–∫–∞
3. –û—Ç—Å–∫–∞–Ω–∏—Ä–æ–≤–∞—Ç—å —à—Ç—Ä–∏—Ö–∫–æ–¥ (–∏–ª–∏ –≤–≤–µ—Å—Ç–∏ –≤—Ä—É—á–Ω—É—é: 1234567890123)
4. –ù–∞–∂–∞—Ç—å Enter

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ –¢–æ–≤–∞—Ä –Ω–∞–π–¥–µ–Ω
- ‚úÖ –¢–æ–≤–∞—Ä –¥–æ–±–∞–≤–ª–µ–Ω –≤ –∫–æ—Ä–∑–∏–Ω—É
- ‚úÖ –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ç–æ–≤–∞—Ä–µ

**–ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ Network:**
```json
// GET /api/products/products/scan_barcode/?barcode=1234567890123
Response (200):
{
  "id": 5,
  "name": "–ú–æ–ª–æ–∫–æ 3.2%",
  "barcode": "1234567890123",
  "sale_price": "12000.00",
  "inventory": {
    "quantity": "98.00"
  }
}
```

---

### –¢–µ—Å—Ç 8: –ú—É–ª—å—Ç–∏—Ç–µ–Ω–∞–Ω—Ç–Ω–æ—Å—Ç—å üîê

**–¶–µ–ª—å:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏–∑–æ–ª—è—Ü–∏—é –¥–∞–Ω–Ω—ã—Ö –º–µ–∂–¥—É –º–∞–≥–∞–∑–∏–Ω–∞–º–∏

**–®–∞–≥–∏:**
1. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –ø–µ—Ä–≤—ã–π –º–∞–≥–∞–∑–∏–Ω (–°—É–ø–µ—Ä–º–∞—Ä–∫–µ—Ç "–ê–∑–∏—è")
2. –°–æ–∑–¥–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ç–æ–≤–∞—Ä–æ–≤
3. –í—ã–π—Ç–∏ –∏–∑ —Å–∏—Å—Ç–µ–º—ã
4. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –≤—Ç–æ—Ä–æ–π –º–∞–≥–∞–∑–∏–Ω (–ú–∞–≥–∞–∑–∏–Ω "–ï–≤—Ä–æ–ø–∞")
5. –°–æ–∑–¥–∞—Ç—å —Ç–æ–≤–∞—Ä—ã –≤–æ –≤—Ç–æ—Ä–æ–º –º–∞–≥–∞–∑–∏–Ω–µ
6. –í–æ–π—Ç–∏ –æ–±—Ä–∞—Ç–Ω–æ –≤ –ø–µ—Ä–≤—ã–π –º–∞–≥–∞–∑–∏–Ω

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ –£ –∫–∞–∂–¥–æ–≥–æ –º–∞–≥–∞–∑–∏–Ω–∞ —Å–≤–æ–π `tenant_key`
- ‚úÖ –¢–æ–≤–∞—Ä—ã –ø–µ—Ä–≤–æ–≥–æ –º–∞–≥–∞–∑–∏–Ω–∞ –Ω–µ –≤–∏–¥–Ω—ã –≤–æ –≤—Ç–æ—Ä–æ–º
- ‚úÖ –¢–æ–≤–∞—Ä—ã –≤—Ç–æ—Ä–æ–≥–æ –º–∞–≥–∞–∑–∏–Ω–∞ –Ω–µ –≤–∏–¥–Ω—ã –≤ –ø–µ—Ä–≤–æ–º
- ‚úÖ –£ –∫–∞–∂–¥–æ–≥–æ –º–∞–≥–∞–∑–∏–Ω–∞ —Å–≤–æ—è –Ω—É–º–µ—Ä–∞—Ü–∏—è (SKU, —á–µ–∫–∏, –ø–∞—Ä—Ç–∏–∏)

---

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤ –∑–∞–ø—Ä–æ—Å–æ–≤

–í—Å–µ –∑–∞–ø—Ä–æ—Å—ã –∫ API –¥–æ–ª–∂–Ω—ã —Å–æ–¥–µ—Ä–∂–∞—Ç—å:

```
Authorization: Bearer <access_token>
X-Tenant-Key: <tenant_key>
Content-Type: application/json
```

**–ò—Å–∫–ª—é—á–µ–Ω–∏—è (–±–µ–∑ X-Tenant-Key):**
- `/api/users/login/`
- `/api/users/auth/login/`
- `/api/users/auth/register/`
- `/api/users/auth/token/refresh/`

---

## üêõ –ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è

### –ü—Ä–æ–±–ª–µ–º–∞: 401 Unauthorized

**–ü—Ä–∏—á–∏–Ω–∞:** –¢–æ–∫–µ–Ω –∏—Å—Ç–µ–∫ –∏–ª–∏ –Ω–µ–¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª–µ–Ω

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–ª–∏—á–∏–µ `access_token` –≤ localStorage
2. –ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –æ–±–Ω–æ–≤–∏—Ç—å —Ç–æ–∫–µ–Ω —á–µ—Ä–µ–∑ refresh
3. –ï—Å–ª–∏ –Ω–µ –ø–æ–º–æ–≥–∞–µ—Ç - –ø–µ—Ä–µ–ª–æ–≥–∏–Ω–∏—Ç—å—Å—è

### –ü—Ä–æ–±–ª–µ–º–∞: 403 Forbidden / Tenant Key Missing

**–ü—Ä–∏—á–∏–Ω–∞:** `X-Tenant-Key` –Ω–µ –¥–æ–±–∞–≤–ª–µ–Ω –∫ –∑–∞–ø—Ä–æ—Å—É

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å `localStorage.getItem('tenant_key')`
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ñ–∞–π–ª `authInterceptor.ts`
3. –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ –∑–∞–≥–æ–ª–æ–≤–æ–∫ –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è

### –ü—Ä–æ–±–ª–µ–º–∞: –¢–æ–≤–∞—Ä –Ω–µ —Å–æ–∑–¥–∞–µ—Ç—Å—è

**–ü—Ä–∏—á–∏–Ω–∞ 1:** –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è `sku` –∏–ª–∏ `barcode` –≤ –∑–∞–ø—Ä–æ—Å–µ

**–†–µ—à–µ–Ω–∏–µ:** –£–±—Ä–∞—Ç—å —ç—Ç–∏ –ø–æ–ª—è –∏–∑ –∑–∞–ø—Ä–æ—Å–∞ (–≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)

**–ü—Ä–∏—á–∏–Ω–∞ 2:** –ö–∞—Ç–µ–≥–æ—Ä–∏—è –∏–ª–∏ –µ–¥–∏–Ω–∏—Ü–∞ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç

**–†–µ—à–µ–Ω–∏–µ:** –°–æ–∑–¥–∞—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—é/–µ–¥–∏–Ω–∏—Ü—É –ø–µ—Ä–µ–¥ —Å–æ–∑–¥–∞–Ω–∏–µ–º —Ç–æ–≤–∞—Ä–∞

### –ü—Ä–æ–±–ª–µ–º–∞: –ü—Ä–æ–¥–∞–∂–∞ –Ω–µ —Å–æ–∑–¥–∞–µ—Ç—Å—è

**–ü—Ä–∏—á–∏–Ω–∞:** –ù–µ—Ç –æ—Ç–∫—Ä—ã—Ç–æ–π —Å–º–µ–Ω—ã

**–†–µ—à–µ–Ω–∏–µ:** –û—Ç–∫—Ä—ã—Ç—å —Å–º–µ–Ω—É –ø–µ—Ä–µ–¥ —Å–æ–∑–¥–∞–Ω–∏–µ–º –ø—Ä–æ–¥–∞–∂–∏

---

## ‚úÖ –ß–µ–∫–ª–∏—Å—Ç –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ –∫ production

- [ ] Backend –∑–∞–ø—É—â–µ–Ω –∏ –¥–æ—Å—Ç—É–ø–µ–Ω
- [ ] Frontend –∑–∞–ø—É—â–µ–Ω –∏ –¥–æ—Å—Ç—É–ø–µ–Ω
- [ ] –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –õ–æ–≥–∏–Ω —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] `tenant_key` —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
- [ ] –°–æ–∑–¥–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–æ–≤ —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] SKU/barcode –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- [ ] –ü–∞—Ä—Ç–∏–∏ —Å–æ–∑–¥–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- [ ] –û—Ç–∫—Ä—ã—Ç–∏–µ —Å–º–µ–Ω—ã —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–¥–∞–∂ —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –ó–∞–∫—Ä—ã—Ç–∏–µ —Å–º–µ–Ω—ã —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —à—Ç—Ä–∏—Ö–∫–æ–¥–æ–≤ —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –ú—É–ª—å—Ç–∏—Ç–µ–Ω–∞–Ω—Ç–Ω–æ—Å—Ç—å —Ä–∞–±–æ—Ç–∞–µ—Ç (–¥–∞–Ω–Ω—ã–µ –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω—ã)
- [ ] –û—Ç—á–µ—Ç—ã –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è
- [ ] –ß–µ–∫–∏ –ø–µ—á–∞—Ç–∞—é—Ç—Å—è
- [ ] –ù–µ—Ç –æ—à–∏–±–æ–∫ –≤ –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞
- [ ] –ù–µ—Ç –æ—à–∏–±–æ–∫ –≤ –ª–æ–≥–∞—Ö backend

---

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12)
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Network tab –¥–ª—è –¥–µ—Ç–∞–ª–µ–π –∑–∞–ø—Ä–æ—Å–æ–≤
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ backend –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ
4. –°–≤–µ—Ä—å—Ç–µ—Å—å —Å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–µ–π:
   - `API_UPDATED.md` - –æ–ø–∏—Å–∞–Ω–∏–µ API
   - `AUTH_ADAPTATION_DONE.md` - –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
   - `MIGRATION_CHECKLIST.md` - —á–µ–∫–ª–∏—Å—Ç –º–∏–≥—Ä–∞—Ü–∏–∏

---

_–î–æ–∫—É–º–µ–Ω—Ç —Å–æ–∑–¥–∞–Ω: 2025-01-17_
_–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ: 2025-01-17_
